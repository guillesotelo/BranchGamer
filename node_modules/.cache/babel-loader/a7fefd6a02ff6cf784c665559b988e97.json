{"ast":null,"code":"import { createReducer, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { setToken } from \"./user\";\nexport const setUser = createAsyncThunk(\"SET_USER\", async (data, thunkAPI) => {\n  try {\n    console.log(\"LLEGUE\");\n    const token = window.localStorage.getItem(\"branchToken\");\n\n    if (token) {\n      const req = await axios.get(`/api/users/logged`, {\n        headers: {\n          authorization: token\n        }\n      });\n      thunkAPI.dispatch(setToken(token));\n      return req.data;\n    }\n\n    return {};\n  } catch (err) {\n    throw err;\n  }\n});\nconst loggedUserReducer = createReducer([], {\n  [setUser.fulfilled]: (state, action) => action.payload\n});\nexport default loggedUserReducer;","map":{"version":3,"sources":["/Users/guillermosotelo/Documents/P5/BC/branch-and-gamer/src/store/loggedUserReducer.js"],"names":["createReducer","createAsyncThunk","axios","setToken","setUser","data","thunkAPI","console","log","token","window","localStorage","getItem","req","get","headers","authorization","dispatch","err","loggedUserReducer","fulfilled","state","action","payload"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,gBAAxB,QAAgD,kBAAhD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,QAAT,QAAyB,QAAzB;AAEA,OAAO,MAAMC,OAAO,GAAGH,gBAAgB,CAAC,UAAD,EAAa,OAAOI,IAAP,EAAaC,QAAb,KAA0B;AAC5E,MAAI;AACFC,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,UAAMC,KAAK,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,aAA5B,CAAd;;AAEA,QAAIH,KAAJ,EAAW;AAET,YAAMI,GAAG,GAAG,MAAMX,KAAK,CAACY,GAAN,CAAW,mBAAX,EAA+B;AAC/CC,QAAAA,OAAO,EAAE;AAAEC,UAAAA,aAAa,EAAEP;AAAjB;AADsC,OAA/B,CAAlB;AAIAH,MAAAA,QAAQ,CAACW,QAAT,CAAkBd,QAAQ,CAACM,KAAD,CAA1B;AAEA,aAAOI,GAAG,CAACR,IAAX;AACD;;AACD,WAAO,EAAP;AACD,GAfD,CAeE,OAAOa,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAnBsC,CAAhC;AAqBP,MAAMC,iBAAiB,GAAGnB,aAAa,CAAC,EAAD,EAAK;AAC1C,GAACI,OAAO,CAACgB,SAAT,GAAqB,CAACC,KAAD,EAAQC,MAAR,KAAmBA,MAAM,CAACC;AADL,CAAL,CAAvC;AAIA,eAAeJ,iBAAf","sourcesContent":["import { createReducer, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\n\nimport { setToken } from \"./user\";\n\nexport const setUser = createAsyncThunk(\"SET_USER\", async (data, thunkAPI) => {\n  try {\n    console.log(\"LLEGUE\")\n    const token = window.localStorage.getItem(\"branchToken\");\n\n    if (token) {\n\n      const req = await axios.get(`/api/users/logged`, {\n        headers: { authorization: token },\n      });\n\n      thunkAPI.dispatch(setToken(token));\n\n      return req.data;\n    }\n    return {}\n  } catch (err) {\n    throw err;\n  }\n});\n\nconst loggedUserReducer = createReducer([], {\n  [setUser.fulfilled]: (state, action) => action.payload,\n});\n\nexport default loggedUserReducer;\n"]},"metadata":{},"sourceType":"module"}