{"ast":null,"code":"import { createReducer, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { aumentarCantidad, disminuirCantidad } from \"../utils\";\nexport const getItems = createAsyncThunk(\"GET_ITEMS\", async (data, thunkAPI) => {\n  try {\n    const {\n      token,\n      id\n    } = data;\n    const req = await axios.get(`/api/cart/items/${id}`, {\n      headers: {\n        authorization: token\n      }\n    });\n    return req.data;\n  } catch (err) {\n    throw err;\n  }\n});\nexport const addItem = createAsyncThunk(\"ADD_ITEM\", async (data, thunkAPI) => {\n  try {\n    const {\n      token,\n      cartInUse\n    } = thunkAPI.getState();\n    const body = {\n      carritoId: cartInUse.id,\n      productId: data.id\n    };\n    const req = await axios.post(\"/api/cart/add\", body, {\n      headers: {\n        authorization: token\n      }\n    });\n    const {\n      productId,\n      quantity\n    } = req.data;\n    return {\n      productId,\n      quantity\n    };\n  } catch (err) {\n    throw err;\n  }\n});\nexport const removeItem = createAsyncThunk(\"REMOVE_ITEM\", async (data, thunkAPI) => {\n  try {\n    const {\n      token,\n      cartInUse\n    } = thunkAPI.getState();\n    await axios.delete(`/api/cart/${cartInUse.id}/${data.id}`, {\n      headers: {\n        authorization: token\n      }\n    });\n    console.log(\"DATA\", data);\n    return data;\n  } catch (err) {\n    throw err;\n  }\n});\nexport const quantityRemove = createAsyncThunk(\"QUANTITY_REMOVE_ITEM\", async (data, thunkAPI) => {\n  try {\n    const {\n      token,\n      cartInUse\n    } = thunkAPI.getState();\n    const body = {\n      carritoId: cartInUse.id,\n      productId: data.id,\n      type: \"remove\"\n    };\n    await axios.put(`/api/cart`, body, {\n      headers: {\n        authorization: token\n      }\n    });\n    return data;\n  } catch (err) {\n    throw err;\n  }\n});\nexport const quantityAdd = createAsyncThunk(\"QUANTITY_ADD_ITEM\", async (data, thunkAPI) => {\n  try {\n    const {\n      token,\n      cartInUse\n    } = thunkAPI.getState();\n    const body = {\n      carritoId: cartInUse.id,\n      productId: data.id,\n      type: \"add\"\n    };\n    await axios.put(`/api/cart`, body, {\n      headers: {\n        authorization: token\n      }\n    });\n    return data;\n  } catch (err) {\n    throw err;\n  }\n});\nconst cartReducer = createReducer([], {\n  [getItems.fulfilled]: (state, action) => action.payload,\n  [addItem.fulfilled]: (state, action) => [...state, action.payload],\n  [removeItem.fulfilled]: (state, action) => state.filter(item => item.productId !== action.payload.id),\n  [quantityAdd.fulfilled]: aumentarCantidad,\n  [quantityRemove.fulfilled]: disminuirCantidad\n});\nexport default cartReducer;","map":{"version":3,"sources":["/Users/guillermosotelo/Documents/P5/BC/branch-and-gamer/src/store/cartReducer.js"],"names":["createReducer","createAsyncThunk","axios","aumentarCantidad","disminuirCantidad","getItems","data","thunkAPI","token","id","req","get","headers","authorization","err","addItem","cartInUse","getState","body","carritoId","productId","post","quantity","removeItem","delete","console","log","quantityRemove","type","put","quantityAdd","cartReducer","fulfilled","state","action","payload","filter","item"],"mappings":"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","sourcesContent":["import { createReducer, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { aumentarCantidad, disminuirCantidad } from \"../utils\";\n\nexport const getItems = createAsyncThunk(\n  \"GET_ITEMS\",\n  async (data, thunkAPI) => {\n    try {\n      const { token, id } = data;\n\n      const req = await axios.get(`/api/cart/items/${id}`, {\n        headers: { authorization: token },\n      });\n\n      return req.data;\n    } catch (err) {\n      throw err;\n    }\n  }\n);\n\nexport const addItem = createAsyncThunk(\"ADD_ITEM\", async (data, thunkAPI) => {\n  try {\n    const { token, cartInUse } = thunkAPI.getState();\n\n    const body = {\n      carritoId: cartInUse.id,\n      productId: data.id,\n    };\n\n    const req = await axios.post(\"/api/cart/add\", body, {\n      headers: { authorization: token },\n    });\n\n    const { productId, quantity } = req.data;\n\n    return { productId, quantity };\n  } catch (err) {\n    throw err;\n  }\n});\n\nexport const removeItem = createAsyncThunk(\n  \"REMOVE_ITEM\",\n  async (data, thunkAPI) => {\n    try {\n      const { token, cartInUse } = thunkAPI.getState();\n\n      await axios.delete(`/api/cart/${cartInUse.id}/${data.id}`, {\n        headers: { authorization: token },\n      });\n      console.log(\"DATA\", data);\n      return data;\n    } catch (err) {\n      throw err;\n    }\n  }\n);\n\nexport const quantityRemove = createAsyncThunk(\n  \"QUANTITY_REMOVE_ITEM\",\n  async (data, thunkAPI) => {\n    try {\n      const { token, cartInUse } = thunkAPI.getState();\n\n      const body = {\n        carritoId: cartInUse.id,\n        productId: data.id,\n        type: \"remove\",\n      };\n\n      await axios.put(`/api/cart`, body, {\n        headers: { authorization: token },\n      });\n\n      return data;\n    } catch (err) {\n      throw err;\n    }\n  }\n);\n\nexport const quantityAdd = createAsyncThunk(\n  \"QUANTITY_ADD_ITEM\",\n  async (data, thunkAPI) => {\n    try {\n      const { token, cartInUse } = thunkAPI.getState();\n\n      const body = {\n        carritoId: cartInUse.id,\n        productId: data.id,\n        type: \"add\",\n      };\n\n      await axios.put(`/api/cart`, body, {\n        headers: { authorization: token },\n      });\n\n      return data;\n    } catch (err) {\n      throw err;\n    }\n  }\n);\n\nconst cartReducer = createReducer([], {\n  [getItems.fulfilled]: (state, action) => action.payload,\n  [addItem.fulfilled]: (state, action) => [...state, action.payload],\n  [removeItem.fulfilled]: (state, action) =>\n    state.filter((item) => item.productId !== action.payload.id),\n  [quantityAdd.fulfilled]: aumentarCantidad,\n  [quantityRemove.fulfilled]: disminuirCantidad,\n});\n\nexport default cartReducer;\n"]},"metadata":{},"sourceType":"module"}